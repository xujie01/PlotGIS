define(["dojo/_base/declare", "dojo/_base/lang","./PlotUtil"],     function (declare, lang, PlotUtil) {    var clazz = declare([], {        //自定义箭头        constructor: function (opitons) {            if (this.id == null) {                this.id = "customArrowDrawer"            }        },        headHeightFactor: 0.15,        headWidthFactor: 0.4,        neckHeightFactor: 0.75,        neckWidthFactor: 0.15,        headRightPnt: null,        neckPnt: null,        getPoints: function (points) {            var point0 = null;            var point1 = null;            var midPnt = null;            var midPnts = null;            var headdPnts = null;            var headdPnt0 = null;            var headdPnt4 = null;            var disPnts = NaN;            var bodyPnts = null;            var bodyPnts1 = null;            var bodyPnts2 = null;            var bodyPntsLen = points.length;            if (bodyPntsLen >= 3 && points[(bodyPntsLen - 1)] != points[bodyPntsLen - 2]) {                point0 = points[0];                point1 = points[1];                midPnt = PlotUtil.getMidPoint(point0, point1);                midPnts = [midPnt];                midPnts = midPnts.concat(points.slice(2));                headdPnts = PlotUtil.getArrowHeadPoints(midPnts, this.headHeightFactor, this.headWidthFactor, this.neckHeightFactor, this.neckWidthFactor);                headdPnt0 = headdPnts[0];                headdPnt4 = headdPnts[4];                disPnts = PlotUtil.distance(point0, point1) / 2 / PlotUtil.getBaseLength(midPnts);                bodyPnts = PlotUtil.getArrowBodyPoints(midPnts, headdPnt0, headdPnt4, disPnts);                bodyPntsLen = bodyPnts.length;                bodyPnts1 = bodyPnts.slice(0, bodyPntsLen / 2);                bodyPnts2 = bodyPnts.slice(bodyPntsLen / 2, bodyPntsLen);                bodyPnts1.push(headdPnt0);                bodyPnts2.push(headdPnt4);                bodyPnts1 = bodyPnts1.reverse();                bodyPnts1.push(point0);                bodyPnts2 = bodyPnts2.reverse();                bodyPnts2.push(point1);                bodyPnts1 = PlotUtil.getBSplinePoints(bodyPnts1);                bodyPnts2 = PlotUtil.getBSplinePoints(bodyPnts2);                return bodyPnts1.reverse().concat(headdPnts, bodyPnts2)            }            return null        }    });    return clazz});